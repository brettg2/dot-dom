const window={};module.exports=window;((global,document,Object,vnodeFlag,createElement,render,wrapClassProxy,anonIndex=0)=>{String.prototype[vnodeFlag]=1;createElement=((element,props={},...children)=>({[vnodeFlag]:1,E:element,P:props[vnodeFlag]?{C:[].concat(props,...children)}:(props.C=[].concat(...children))&&props}));global.R=render=((vnodes,dom,_baseState={},_children=dom.childNodes,_c=0,_t=0,_r=1)=>{function nrender(vnode,index,_unused1,_pathState,_path,__c=_c,_child=_children[_c++],_new_dom,nnode=vnode){if(!_pathState){if(vnode.E&&vnode.E.call&&!vnode.E.name&&!vnode.E._id)vnode.E._id=++anonIndex;_path=index+(vnode.E?"."+(vnode.E.trim?vnode.E:vnode.E.call?vnode.E.name||vnode.E._id||"*":""):"");_pathState=_baseState[_path]=_baseState[_path]||[0,new Proxy({},{deleteProperty(target,name){timer();delete target[name]},set(target,name,value){timer();target[name]=value},get:function(target,name){timer();return target[name]}}),{}]}function timer(newState={}){if(_r)return;if(_t)clearTimeout(_t);_t=setTimeout(()=>update(newState))}function update(newState={}){if(_pathState[0].E&&_children[__c]!==_pathState[0])return;_r=1;_c=__c;nrender(vnode,index,0,_pathState);_r=0}while(nnode.E&&nnode.E.call){nnode.E.data=_pathState[1];nnode=nnode.E(nnode.P,_pathState[1])}if(nnode.constructor===Array){return _c--&&nnode.map(nrender)}_new_dom=_pathState[0]&&_pathState[0].E==nnode.E?_pathState[0]:nnode.trim?document.createTextNode(nnode):document.createElement(nnode.E);(_new_dom=_child?(_child.E!=nnode.E||_child!==_new_dom)&&_child.data!=nnode?dom.replaceChild(_new_dom,_child)&&_new_dom:_child:dom.appendChild(_new_dom)).E=nnode.E;_pathState[0]=_new_dom;if(_new_dom._lk&&_new_dom._lk.constructor===Array){let pKeys=Object.keys(nnode.P);_new_dom._lk.map(function(lk){if(pKeys.indexOf(lk)<0){nnode.P[lk]=null}})}nnode.trim?_new_dom.data!==nnode?_new_dom.data=nnode:null:Object.keys(nnode.P).map(key=>key=="style"?Object.assign(_new_dom[key],nnode.P[key]):(_new_dom._lk=Object.keys(nnode.P))&&(_new_dom[key]!==nnode.P[key]&&(_new_dom[key]=nnode.P[key])))&&render(nnode.P.C,_new_dom,_pathState[2])}(vnodes.map?vnodes:[vnodes]).map(nrender);while(_children[_c])dom.removeChild(_children[_c]);_r=0});wrapClassProxy=(factoryFn=>new Proxy(factoryFn,{get:(targetFn,className,_instance)=>wrapClassProxy((...args)=>((_instance=targetFn(...args)).P.className=([_instance.P.className]+" "+className).trim(),_instance))}));global.H=new Proxy(createElement,{get:(targetFn,tagName)=>targetFn[tagName]||wrapClassProxy(createElement.bind(global,tagName))})})(window,document,Object,Symbol());
